• 搜索引擎用户信息需求分布 • 查询的信息需求分类体系(Broder, 2003) • 导航类 (Navigational, Known item search) ○ 查找某个已知存在的页面/资源 ○ 导航类查询案例 ○ 主页查找(Homepage Finding) § 百度 www.baidu.com § 北京大学 www.pku.edu.cn
○ 其他资源查找(Named-page Finding) § 复旦大学2014年研究生招生简章 § 护照申请表 § 2012年高考数学试卷
• 信息类 (Informational, Key resource finding)
    ○ 查找与某个主题相关的关键信息资源
    ○ 信息类查询案例
        ○ 获取相关信息，没有确定的查询目标
            § 香港股市：hk.finance.yahoo.com；cn.biz.yahoo.com/stock/hk.html
        ○ 往往需要不止一个结果
            § 麦迪：www.t-mac.cn；
tieba.baidu.com/f?kw=麦迪 ○ 在查找的过程中逐渐深化认识 § 关节肿胀 => 痛风 => 嘌呤
• 事务类 (Transactional, Task-oriented search)
    ○ 查找与完成某个特定任务相关的资源
    ○ 事务类查询案例
        ○ 与完成特定任务相关，没有确定的查询目标
            § Ultraedit 下载：www.onlinedown.net/soft/7752.htm；www.skycn.com/soft/22314.html 
        ○ 往往一个结果就可以满足需求
            § 星星大结局：
www.iqiyi.com/v_19rrh6qq.html ○ 垂直搜索引擎服务的对象
• 信息需求分布估计 ○ Broder: 20%/50%/30% (导航/信息/事务) ○ Rose: 14.7%/60.9%/24.4% (导航/信息/事务) ○ 对2008年6月某搜索引擎的抽样标注：导航类约占30.6%，信息/事务类约占69.4% • 中英文用户行为习惯差异 • 采样方法差异 ○ 信息需求 v.s. 热门程度
• 查询热门程度 • 充分重视热门查询的作用 • 必须有适当的冷门查询代表 • 查询信息需求 • 包含导航类、信息类、事务类三种不同类型的查询信息需求 • 三种信息需求类别比例约为：2: 5: 3
• Beyond Cranfield methodology • User preference test • Interleaving test
• NDCG@N: ○ Normalized Discounted Cumulative Gain ○ 对结果进行多级相关性标注时适用 • ERR: Expected Reciprocal Rank ○ Supported by Yahoo! and Google ○ 可以获取用户行为数据时适用 • B-pref: Binary preference • 相关性标注不完整时适用
•
• 1.1数据抓取子系统的主要功能 • 及时、高效的收集尽可能全面的万维网页面，以及建立它们之间的超链接关系
• 1.2数据抓取子系统的性能要求 • 1.2.1 全面性 (Quantity) • Deep Web(暗网)数据抓取 • 1.2.2 时效性 (freshness) • 理想状态：Google should be scanning the entire Web every second. (Larry Page, Google Founder) • 网络信息的时效性差异 ○ 长期稳定：高斯消元法解方程 ○ 相对稳定：郭德纲博客 ○ 即时更新：中石油股价 ○ 周期时效：“来自星星的你”下载 ○ 突发时效：乔布斯逝世 • 累积式抓取 (cumulative crawling) ○ 时效性要求低，通常用于索引的建立 ○ 耗时较长 (百度：1个月左右) ○ 依据互联网链接结构进行抓取 • 增量式抓取 (incremental crawling) ○ 时效性要求高，通常用于索引的更新 ○ 随时进行 (Google 新闻：分钟级) ○ 依据链接结构进行抓取，也可以进行定向抓取 ○ 依据网页更新频率进行抓取决策：如何判定网页何时更新？ • 1.2.3 高效性 (Efficiency) • 假设一定时间T内，满足搜索引擎用户所有信息需求的网络资源总量为S，则理想情况下为满足用户需求需要的带宽B应该满足： •
• 
R：网络资源中满足用户信息
需求的部分所占的比例 


• 

U：带宽的平均利用率

• 提升R：识别各类低质量网络资源
• 提升U：合理利用被抓取对象的带宽/计算资源
• 搜索引擎和被抓取对象交互：Robots.txt
    ○ 目的：协同共赢
    ○ User-Agent: 适用下
列规则的抓取程序 ○ Allow：被允许的网 页抓取需求 ○ Disallow：要拦截的 网页抓取需求 ○ 示例：百度知道， 水木社区 2. 搜索引擎内容索引子系统 • • 2.2.1 倒排索引构建 • 以词项为核心组织的索引形式 • 词项：Term，文档：Document，位置：position • 应用：在大规模文档集合中查找特定内容 • 示例：Query={Term1, Term N} Term 1 Doc 1, pos 1 Doc 1, pos 2 … Doc p, pos q Term 2 Doc 1’, pos 1’ Doc 1’, pos 2’ … Doc p’, pos q’ …
Term N Doc 1(n), pos 1(n) Doc 1(n), pos 2(n) … Doc p(n), pos q(n) • 2.2.2 正排索引构建 • 以文档为核心组织的索引形式 • 词项：Term，文档：Document，位置：position • 应用：网页摘要、内容无关特征信息等 • 示例：搜索结果中的查询词标记提示 Doc 1 Term 1, pos 1 Term 1, pos 2 … Term p, pos q Doc 2 Term 1’, pos 1’ Term 1’, pos 2’ … Term p’, pos q’ …         Doc N Term 1(n), pos 1(n) Term 1(n), pos 2(n) … Term p(n), pos q(n) • 2.2.3 构建词项列表 • 倒排索引/正排索引构建的必要环节 • 英文词项列表 ○ 以空格加以分割，从文本串切分为词项 ○ 专有名词的处理：Los Angeles ○ 标点符号等的处理：O’Neill, C++, C#, B-52 • 中文词项列表 ○ 无法以空格分隔，专门的分词算法支持(90%以上) ○ 全、半角符号处理：1 = １= 一 = 壹 ○ 编码处理：UTF-8, GBK, BIG5 • 2.3 内容索引子系统的性能要求 • 2.3.1 稳定、高效提供索引查询服务 • 大规模磁盘读写是索引系统高效运行的瓶颈 ○ 运行速度问题、磁盘寿命问题 • 压缩：减少存储空间 ○ 去除停用词项 § 普遍出现、缺乏语义 含义的词项 § 保留停用词会对索引 结构产生什么影响？ ○ 编号压缩，位置信息压缩，… • 2.3.2 合理控制索引查询服务的资源消耗 • 依据1：用户查询需求并非均匀分布 ○ 5%的索引数据可以满足92%的用户需求， 近90%的索引项几乎不被使用 ○ 层次索引结构：用户需求的局部性原理 • 依据2：搜索引擎结果展现形式 ○ 合理组织倒排索引对应的文档顺序 • 3. 搜索引擎内容检索子系统 • 3.1 内容检索子系统的主要功能 • 3.1.1 网页与查询的内容相似度计算 • 信息检索：协助信息的潜在用户将信息需求转换为一张文献来源信息列表，而这些文献包含有对其有用的信息。（Calvin Mooers, 1951） • 传统信息检索算法 ○ 输入：倒排文档索引，查询词 ○ 输出：结果文档列表 • 搜索引擎系统 v.s. 信息检索系统 ○ 数据对象差异 ○ 用户群体差异 • 3.1.2 网页与查询的内容相似度计算 • 数据对象：2008年即已超过1 万亿网页 • Right design at X may be very wrong at 10X or 100X (Jeff Dean, Google Fellow) • 检索领域曾经的研究结果： ○ 信息检索系统与主流 搜索引擎性能相似 ○ 链接结构分析对于 检索结果提升没有 起到明显的作用 • 3.1.2 网页与查询的内容相似度计算 • 用户对象：从专家到普通人 • 信息检索系统的查询需求表述 • 搜索引擎系统的查询需求表述：平均2-3个词 ○ 构建复杂查询的尝试(W3QL, WebSQL等)失败告终 • 3.1.3 搜索结果排序 • 搜索引擎需要借助数百个因素共同决定结果排序 • SEO site: 100+ • Yahoo LTR task: 700+ • 链接结构、内容相关、 用户行为、页面结构、 时间因素、服务稳定性、…… • 3.2.1 准确理解用户信息需求 • 歧义性查询 ○ 苹果：水果？IPAD？范冰冰？ ○ Java：咖啡？海岛？编程？ ○ Cherry：车厘子？茶轴？ • 个性化建模与检索 • 3.2.1 准确理解用户信息需求 • 宽泛查询 ○ 哈利波特：电影下载？小说阅读？演员八卦？ ○ 复旦：招生？新闻？ • 多样性需求分析与检索 • 3.2.2 直接满足用户信息需求 • 令人心情愉快的图片/现在几点/电脑中毒怎么办 • Jakob Nielsen (Nielsen Group首席分析师)： 人们并不愿意使用搜索引擎。他们希望离开搜索引擎。 • 3.2.2 直接满足用户信息需求 • 垂直搜索资源整合 • 内容提供者与搜索引擎如何达到共赢 • 4. 搜索引擎链接结构分析子系统 • 4.1 链接分析子系统的主要功能 • 4.1.1 网络资源质量评估 • 缘起：文献之间的引用关系分析/BackRub • 早期搜索引擎的核心竞争力 ○ PageRank：Page and Brin, 1998 ○ HITS：Kleinberg, 1998 • 4.1.1 网络资源质量评估 • PageRank：全网链接关系分析 ○ 随机浏览模型 ○ PageRank =用户随机浏览 互联网时访问该页面的概率 • HITS：搜索结果链接关系分析 ○ 链接权威度(Hub) ○ 内容权威度(Authority) • 4.1.2 扩充文档描述内容 • 4.1.2 扩充文档描述内容 • “锚”文本 (Anchor Text) 用于描述链接的文本 • 对链接到网页的内容的描述 • 4.1.2 扩充文档描述内容 • 用户群体智慧（Wisdom of crowds） • 高效率进行网页质量估计 • 链接结构数据规模 ○ AltaVista：1999年，2.03亿网页，14.66亿链接 ○ ClueWeb：2009年，10.41亿网页，79.44亿链接 ○ SogouT：2008年，1.39亿网页，33.4亿链接 ○ 搜索引擎链接结构数据：千亿网页，万亿链接 • 实时性要求：新闻搜索 • 网站级别链接结构分析 • 低质量链接数据过滤 • 5.1 用户需求驱动的设计理念 • 根据用户需求确定网页抓取、更新的频率 • 根据用户需求确定网页层次索引结构的组成 • 根据用户需求确定检索算法设计 • 根据用户需求设计链接结构分析算法，确定网页质量评估的方式
• 5.2 有损优化的设计理念
        • 核心：搜索引擎是资源密集的网络产品，
有限的资源用在合理的方向 • 部分网页抓取更新频率要高于其它网页 • 层次索引结构决定硬件水平
• 5.3 强调效率的设计理念
    • 数据抓取子系统：节省带宽/提升R/提升U
    • 内容索引子系统：节约每一个比特
    • 链接结构分析子系统：舍弃在线计算的HITS算法
    • 内容检索子系统：舍弃复杂的自然语言和语义理解

• 5.4 可扩展性的设计理念
    • 数据抓取子系统的可扩展性
        ○ 应对硬件资源扩展
    • 内容索引系统的可扩展性
        ○ 新抓取的内容数据
    • 内容检索系统的可扩展性
        ○ 新增加的排序因素
    • 链接结构分析系统的可扩展性
        ○ 新出现的网页数据